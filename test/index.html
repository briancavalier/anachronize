<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Single</title>
    <script src="out.js"></script>
    <script>
        (function(window) {
            assert(window.single.value === 'worked', 'main module');
            assert(window.single.m1 === 'm1 worked', 'submodule w/require');
            assert(window.single.m2 === 'm2 nested2', 'submodule w/require nested');
            assert(window.single.nested_nested1 === 'nested1 worked', 'nested module w/require');
            assert(window.single.nested_nested2 === 'nested2', 'nested module');

            function assert(condition, msg) {
                if(condition) {
                    console.log('SUCCESS', msg);
                } else {
                    throw new Error('FAIL: ' + msg);
                }
            }

        }(window));
    </script>
</head>
<body>

</body>
</html>